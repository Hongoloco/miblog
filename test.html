<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba del Sistema - Ale Gallo</title>
    <link rel="stylesheet" href="assets/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: #1e1e1e;
            border-radius: 10px;
            border: 2px solid #4a90e2;
        }
        .test-result {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
            font-family: monospace;
        }
        .test-success {
            background: #4caf50;
            color: white;
        }
        .test-error {
            background: #f44336;
            color: white;
        }
        .test-info {
            background: #2196f3;
            color: white;
        }
        .test-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            margin: 0.5rem;
        }
        .test-button:hover {
            background: #357abd;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧪 Prueba del Sistema del Blog</h1>
        <p>Esta página verifica que todas las funcionalidades estén trabajando correctamente.</p>
        
        <div class="test-section">
            <h2>🔧 Herramientas de Prueba</h2>
            <button class="test-button" onclick="testAuthentication()">Probar Autenticación</button>
            <button class="test-button" onclick="testFirebase()">Probar Firebase</button>
            <button class="test-button" onclick="testNavigation()">Probar Navegación</button>
            <button class="test-button" onclick="simulateLogin()">Simular Login</button>
            <button class="test-button" onclick="simulateLogout()">Simular Logout</button>
            <button class="test-button" onclick="clearResults()">Limpiar Resultados</button>
        </div>
        
        <div class="test-section">
            <h2>📊 Resultados de las Pruebas</h2>
            <div id="test-results">
                <div class="test-result test-info">Haz clic en los botones para ejecutar las pruebas</div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>🔗 Enlaces de Navegación</h2>
            <a href="index.html" class="test-button">Ir al Inicio</a>
            <a href="blog-viewer.html" class="test-button">Ir al Blog</a>
            <a href="contact.html" class="test-button">Ir a Contact</a>
            <a href="contact.html" class="test-button">Ir a Contacto</a>
            <a href="admin.html" class="test-button">Ir al Admin</a>
        </div>
    </div>

    <!-- Scripts de Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    
    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('test-results');
            const result = document.createElement('div');
            result.className = `test-result test-${type}`;
            result.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            results.appendChild(result);
            results.scrollTop = results.scrollHeight;
        }
        
        function clearResults() {
            document.getElementById('test-results').innerHTML = '';
        }
        
        function testAuthentication() {
            addResult('🔐 Probando autenticación...', 'info');
            
            const isAuth = sessionStorage.getItem('authenticated');
            if (isAuth === 'true') {
                addResult('✅ Usuario autenticado correctamente', 'success');
            } else {
                addResult('❌ Usuario no autenticado', 'error');
            }
        }
        
        function testFirebase() {
            addResult('🔥 Probando Firebase...', 'info');
            
            if (typeof firebase !== 'undefined') {
                addResult('✅ Firebase está disponible', 'success');
                
                const database = firebase.database();
                
                // Probar conexión
                database.ref('blog-posts').once('value', (snapshot) => {
                    const posts = snapshot.val();
                    addResult(`📝 Posts encontrados: ${posts ? Object.keys(posts).length : 0}`, 'success');
                }).catch(error => {
                    addResult(`❌ Error al cargar posts: ${error.message}`, 'error');
                });
                
                database.ref('contact-messages').once('value', (snapshot) => {
                    const messages = snapshot.val();
                    addResult(`📧 Mensajes encontrados: ${messages ? Object.keys(messages).length : 0}`, 'success');
                }).catch(error => {
                    addResult(`❌ Error al cargar mensajes: ${error.message}`, 'error');
                });
                
            } else {
                addResult('❌ Firebase no está disponible', 'error');
            }
        }
        
        function testNavigation() {
            addResult('🧭 Probando navegación...', 'info');
            
            const pages = ['index.html', 'blog-viewer.html', 'contact.html', 'admin.html'];
            
            pages.forEach(page => {
                fetch(page)
                    .then(response => {
                        if (response.ok) {
                            addResult(`✅ ${page} está disponible`, 'success');
                        } else {
                            addResult(`❌ ${page} no está disponible (${response.status})`, 'error');
                        }
                    })
                    .catch(error => {
                        addResult(`❌ Error al acceder a ${page}: ${error.message}`, 'error');
                    });
            });
        }
        
        function simulateLogin() {
            addResult('🔑 Simulando login...', 'info');
            sessionStorage.setItem('authenticated', 'true');
            addResult('✅ Sesión establecida', 'success');
        }
        
        function simulateLogout() {
            addResult('🚪 Simulando logout...', 'info');
            sessionStorage.removeItem('authenticated');
            addResult('✅ Sesión eliminada', 'success');
        }
        
        // Ejecutar verificaciones automáticas al cargar
        document.addEventListener('DOMContentLoaded', function() {
            addResult('🚀 Sistema de pruebas iniciado', 'info');
            testAuthentication();
            testFirebase();
        });
    </script>
</body>
</html>
