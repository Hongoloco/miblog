<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración - Ale Gallo</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/admin-style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <!-- Sistema de Autenticación -->
    <script src="js/auth-system.js"></script>
    <!-- Efectos Visuales -->
    <script src="js/visual-effects.js"></script>
</head>
<body>
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <h1>🔐 Panel de Administración</h1>
            <p>Accede para gestionar tu blog</p>
            
            <form id="admin-login-form" class="admin-login-form">
                <div class="form-group">
                    <label for="admin-username">Usuario:</label>
                    <input type="text" id="admin-username" name="username" required>
                </div>
                
                <div class="form-group">
                    <label for="admin-password">Contraseña:</label>
                    <input type="password" id="admin-password" name="password" required>
                </div>
                
                <button type="submit" class="btn-primary">Iniciar Sesión</button>
            </form>
            
            <div id="admin-login-error" class="login-error" style="display: none;"></div>
        </div>
    </div>

    <div id="admin-panel" class="admin-panel" style="display: none;">
        <header class="admin-header">
            <h1>📝 Panel de Administración</h1>
            <div class="admin-nav">
                <button onclick="showSection('dashboard')" class="nav-btn active" id="dashboard-btn">Dashboard</button>
                <button onclick="showSection('posts')" class="nav-btn" id="posts-btn">Posts</button>
                <button onclick="showSection('comments')" class="nav-btn" id="comments-btn">Comentarios</button>
                <button onclick="showSection('messages')" class="nav-btn" id="messages-btn">Mensajes</button>
                <button onclick="showSection('settings')" class="nav-btn" id="settings-btn">Configuración</button>
                <button onclick="Admin.logout()" class="btn-danger">Cerrar Sesión</button>
            </div>
        </header>

        <main class="admin-main">
            <!-- Dashboard -->
            <section id="dashboard-section" class="admin-section active">
                <h2>📊 Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>📝 Posts</h3>
                        <span id="posts-count">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>💬 Comentarios</h3>
                        <span id="comments-count">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>📧 Mensajes</h3>
                        <span id="messages-count">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>👁️ Mensajes sin leer</h3>
                        <span id="unread-messages-count">0</span>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <h3>🚀 Acciones Rápidas</h3>
                    <button onclick="showSection('posts')" class="btn-primary">Crear Nuevo Post</button>
                    <button onclick="showSection('messages')" class="btn-secondary">Ver Mensajes</button>
                    <button onclick="window.open('index.html', '_blank')" class="btn-secondary">Ver Sitio Web</button>
                </div>
            </section>

            <!-- Posts -->
            <section id="posts-section" class="admin-section">
                <h2>📝 Gestión de Posts</h2>
                
                <div class="section-header">
                    <button onclick="showCreatePost()" class="btn-primary">➕ Crear Nuevo Post</button>
                </div>

                <div id="create-post-form" class="form-container" style="display: none;">
                    <h3>Crear Nuevo Post</h3>
                    <form id="new-post-form">
                        <div class="form-group">
                            <label for="post-title">Título:</label>
                            <input type="text" id="post-title" name="title" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="post-summary">Resumen:</label>
                            <textarea id="post-summary" name="summary" rows="3" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="post-content">Contenido:</label>
                            <textarea id="post-content" name="content" rows="10" required></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Publicar Post</button>
                            <button type="button" onclick="hideCreatePost()" class="btn-secondary">Cancelar</button>
                        </div>
                    </form>
                </div>

                <div id="posts-list" class="data-list">
                    <p>Cargando posts...</p>
                </div>
            </section>

            <!-- Comentarios -->
            <section id="comments-section" class="admin-section">
                <h2>💬 Gestión de Comentarios</h2>
                <div id="comments-list" class="data-list">
                    <p>Cargando comentarios...</p>
                </div>
            </section>

            <!-- Mensajes -->
            <section id="messages-section" class="admin-section">
                <h2>📧 Mensajes de Contacto</h2>
                <div id="messages-list" class="data-list">
                    <p>Cargando mensajes...</p>
                </div>
            </section>

            <!-- Configuración -->
            <section id="settings-section" class="admin-section">
                <h2>⚙️ Configuración</h2>
                
                <div class="settings-group">
                    <h3>🔐 Cambiar Credenciales</h3>
                    <form id="change-credentials-form">
                        <div class="form-group">
                            <label for="new-username">Nuevo Usuario:</label>
                            <input type="text" id="new-username" name="username">
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">Nueva Contraseña:</label>
                            <input type="password" id="new-password" name="password">
                        </div>
                        
                        <button type="submit" class="btn-primary">Actualizar Credenciales</button>
                    </form>
                </div>

                <div class="settings-group">
                    <h3>🗑️ Acciones Peligrosas</h3>
                    <button onclick="Admin.clearAllData()" class="btn-danger">Limpiar Toda la Base de Datos</button>
                    <p><small>⚠️ Esta acción no se puede deshacer</small></p>
                </div>

                <div class="settings-group">
                    <h3>📊 Información del Sistema</h3>
                    <p><strong>Proyecto Firebase:</strong> <code>mi-b-99ca8</code></p>
                    <p><strong>Base de Datos:</strong> Firebase Realtime Database</p>
                    <p><strong>Versión:</strong> 1.0.0</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/admin-panel.js"></script>
</body>
</html>
